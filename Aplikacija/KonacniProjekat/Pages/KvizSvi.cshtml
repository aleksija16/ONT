@page
@model KonacniProjekat.KvizSviModel
@{
    ViewData["Title"]="Kvizovi";
}
<div class="text-center">
    <h1 class="display-4">Kvizovi</h1>
</div>

@if(SessionClass.TipKorisnika == "A") 
{
    <div class="text-right">
        <h3><a asp-page="./KvizDodaj">Dodaj kviz</a></h3>
    </div>
}

<div>
    <table class="table table-bordered">
        <thead>
            <th>ID kviza</th>
            <th>Naziv kviza</th>
            <th>Znamenitost</th>
            <th>Broj pitanja</th>
            <th>Najbolji rezultat</th>
            <th>Broj učesnika</th>
            @if (SessionClass.TipKorisnika == "A")
            {
                <th></th>
                <th></th>  
            }
            else if (SessionClass.TipKorisnika == "T")
            {
                <th></th> 
            }
        </thead>

        <tbody>
            <form method="get">
                @foreach (var kviz in Model.SviKvizovi)
                {
                    <tr>
                        <td>@kviz.IdKviza</td>
                        <td>@kviz.NazivKviza</td>
                        <td>@if (kviz.IdZnamenitostiKNavigation == null)
                            {
                            }                               
                            else
                            {
                                @kviz.IdZnamenitostiKNavigation.NazivZnamenitosti
                            }
                        </td>
                        <td>@if ((int)kviz.IdKviza > Model.BrojPitanjaPoKvizu.Count())
                            {
                            }
                            else
                            {
                                @Model.BrojPitanjaPoKvizu[(int)kviz.IdKviza-1]
                            }
                        </td>
                        <td>
                            @if ((int)kviz.IdKviza > Model.NajboljiRezultatPoKvizuString.Count())
                            {
                            }
                            else
                            {
                                @Model.NajboljiRezultatPoKvizuString[(int)kviz.IdKviza - 1]
                            }
                        </td>
                        <td>
                            @if ((int)kviz.IdKviza > Model.BrojUcesnikaPoKvizu.Count())
                            {
                            }
                            else
                            {
                                @Model.BrojUcesnikaPoKvizu[(int)kviz.IdKviza-1]
                            }
                        </td>
                        @if (SessionClass.TipKorisnika == "A")
                        {
                            <td><a asp-page="./KvizJedan" asp-route-id="@kviz.IdKviza">Vidi kviz</a></td>
                            <td><a asp-page="./KvizIzmeni" asp-route-id="@kviz.IdKviza">Izmeni kviz</a></td>
                        }
                        else if (SessionClass.TipKorisnika == "T")
                        {
                            <td><a asp-page="./KvizUradi" asp-route-id="@kviz.IdKviza">Uradi kviz</a></td>
                        }                        
                    </tr>
                }
            </form>
        </tbody>
    </table>
</div>